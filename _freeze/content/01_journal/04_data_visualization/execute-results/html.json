{
  "hash": "e83c82e9afdc7b0dcc71e7c2fd0217ab",
  "result": {
    "markdown": "---\ntitle: \"Data Visualization\"\nauthor: \"Joschka Schwarz\"\n---\n\n\n::: callout-note\nVisualization\n:::\n\n\n\n\n\n\n# Data Visualization Challenge\n\nLast compiled: 2023-08-09\n\n## Case 1: Cumulative Cases Vs. Time\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-1_0b91e24b8cc30cea2aa9aa267f3fb2ea'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(glue)\nlibrary(ggrepel)\ncovid_data_tbl <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\ncountries <- c(\"Germany\",\"United Kingdom\",\"France\",\"Spain\",\"United States\",\"Europe\")\nlast_date <- max(covid_data_tbl$date)\n#wrangling\ncumulative_cases_tbl <- covid_data_tbl %>% \n  select(location,date,total_cases) %>%\n  filter(location %in% countries) %>% filter(!is.na(total_cases)) #%>% \n  # as_factor(location) %>% fct_reorder(total_cases) #%>% \n  #mutate(new_date=floor_date(date(date),unit = \"months\")) %>% \n  # group_by(location) %>% \n  # summarise(cum_cases=sum(new_cases)) %>% \n  # mutate(month_year=glue('{format(new_date,\"%B %Y\")}'))\n  #ungroup()\n#visualization\ncumulative_cases_tbl$label <- NA\ncumulative_cases_tbl$label[which((cumulative_cases_tbl$date == \n                                   max(cumulative_cases_tbl$date)))] <- \n  cumulative_cases_tbl$total_cases[which(cumulative_cases_tbl$date==\n                                           max(cumulative_cases_tbl$date))]\ncumulative_cases_tbl %>% \n  ggplot(aes(date,total_cases,color=location)) +\n  geom_line(size =1)+\n  scale_y_continuous(labels = scales::label_number(scale=1e-6,\n                                                    suffix=\"M\"))+\n  geom_label_repel(aes(label = label))+\n  scale_color_discrete(type = c(\"#E69F00\", \"#56B4E9\", \"#009E73\", \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\"))+\n  labs(\n    title = \"COVID-19 confirmed cases worldwide\",\n    subtitle = glue(\"As of {last_date}\"), #vielleicht richtiges Datum eintragen\n    x = \"\",\n    y = \"Cumulative Cases\",\n    fill = \"location\",\n    caption = \"Europe Bypassed US in number of cumulative cases in the second half of 2020\"\n  ) \n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n## Case 2: Mortality Rate\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-2_b156ac9aa814d7e5258c8ef9234ac6aa'}\n\n```{.r .cell-code}\n# Case 2\n#Lat and Longitude Data for world\nworld <- map_data(\"world\")\n\n#Calculate moratality rate\nmortality_rate_tbl <- covid_data_tbl %>% \n  select(location, date,new_deaths,population) %>%filter(!is.na(new_deaths)) %>%\n  filter(date<=as.Date(\"2021-04-16\")) %>% \n  mutate(mort_rate=new_deaths/population) %>% \n  group_by(location) %>% \n  summarise(mortality_rate=sum(mort_rate)) %>% arrange(desc(mortality_rate))%>% \n  mutate(location = case_when(\n    \n    location == \"United Kingdom\" ~ \"UK\",\n    location == \"United States\" ~ \"USA\",\n    location == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n    TRUE ~ location\n    \n  ))\nmapped_data <- world %>% left_join(mortality_rate_tbl,by=c(\"region\"=\"location\"))\nmapped_data %>% \n  ggplot(aes(long,lat, mortality_rate))+\n  geom_map(aes(map_id=region, fill = mortality_rate ),map = mapped_data) +\n  scale_fill_continuous(low=\"red\", high=\"black\",\n                        labels = scales::label_number(scale  = 1e2,\n                                                      prefix = \"\",\n                                                      suffix = \"%\")) +\nlabs(\n  title = \"Confirmed COVID-19 deaths relative to the size of population\",\n  fill = \"mortality_rate\",\n  caption = max(covid_data_tbl$date)\n) \n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}